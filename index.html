<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üîê El √∫ltimo deseo del guardi√°n ‚Äî Escape Room ELE</title>

<style>
:root{
  --bg:#0f0f0f;
  --panel:#151515;
  --accent:#c9a66b;
  --muted:#cfcfcf;
  --good:#2ecc71;
  --bad:#e74c3c;
  font-family: "Segoe UI", Arial, sans-serif;
}
body{
  margin:0;
  background:radial-gradient(circle at top left, rgba(201,166,107,.08), transparent 25%), #0b0b0b;
  color:var(--muted);
}
.container{
  max-width:1100px;
  margin:20px auto;
  padding:20px;
  background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.65));
  border-radius:12px;
  box-shadow:0 0 25px rgba(0,0,0,.6);
}
header{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  align-items:center;
}
h1{
  margin:0;
  color:var(--accent);
}
.subtitle{
  font-size:.95rem;
  max-width:600px;
}
.status{
  margin-left:auto;
  display:flex;
  gap:12px;
}
.panel{
  background:var(--panel);
  padding:10px 14px;
  border-radius:8px;
}
nav{
  margin-top:20px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.room-btn{
  background:#1c1c1c;
  border:1px solid rgba(201,166,107,.2);
  color:var(--muted);
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}
.room-btn.active{
  background:rgba(201,166,107,.2);
  color:#fff;
}
main{
  margin-top:20px;
}
.room{
  display:none;
  background:rgba(0,0,0,.4);
  padding:18px;
  border-radius:10px;
}
.room.active{display:block}
.room h2{color:var(--accent)}
.question{
  margin-top:16px;
  padding:14px;
  background:#121212;
  border-radius:8px;
}
label{display:block;margin-bottom:6px}
input[type="text"]{
  width:100%;
  padding:8px;
  border-radius:6px;
  border:none;
  background:#0b0b0b;
  color:var(--muted);
}
.btn{
  margin-top:8px;
  padding:8px 14px;
  border:none;
  border-radius:6px;
  background:var(--accent);
  color:#000;
  cursor:pointer;
}
.choices{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.choice{
  background:#0b0b0b;
  padding:8px;
  border-radius:6px;
  cursor:pointer;
}
.feedback{
  margin-top:8px;
  padding:8px;
  border-radius:6px;
}
.correct{background:rgba(46,204,113,.2); color:var(--good)}
.incorrect{background:rgba(231,76,60,.2); color:var(--bad)}
.hint-btn{
  margin-top:6px;
  background:#333;
  color:#ddd;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}
footer{
  margin-top:20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
details{
  margin-top:20px;
  background:#101010;
  padding:12px;
  border-radius:8px;
}
@media(max-width:800px){
  header{flex-direction:column;align-items:flex-start}
  .status{margin-left:0}
}
</style>
</head>

<body>
<div class="container">

<header>
  <div>
    <h1>üîê El √∫ltimo deseo del guardi√°n</h1>
    <p class="subtitle">
      Entra en el santuario y demuestra que dominas el <strong>subjuntivo presente</strong>.
      Nivel recomendado: B1‚ÄìB2.
    </p>
  </div>
  <div class="status">
    <div class="panel">‚≠ê Puntos: <span id="score">0</span></div>
    <div class="panel">üìò Progreso: <span id="progress">0/5</span></div>
  </div>
</header>

<nav>
  <button class="room-btn active" data-room="deseo">Deseo</button>
  <button class="room-btn" data-room="duda">Duda</button>
  <button class="room-btn" data-room="emocion">Emoci√≥n</button>
  <button class="room-btn" data-room="finalidad">Finalidad</button>
  <button class="room-btn" data-room="final">Sala final</button>
</nav>

<main>

<section id="deseo" class="room active">
<h2>Sala del Deseo</h2>
<p>Usa el subjuntivo despu√©s de verbos de deseo e influencia.</p>

<div class="question">
<label>Espero que ella _____ (venir) a la ceremonia.</label>
<input id="d1">
<button class="btn" onclick="check('d1','venga','deseo')">Comprobar</button>
<div id="d1-f" class="feedback"></div>
</div>

<div class="question">
<label>Te recomiendo que _____ temprano.</label>
<div class="choices">
<div class="choice" onclick="check('d2','vayas','deseo','vayas')">vas</div>
<div class="choice" onclick="check('d2','vayas','deseo','vayas')">vayas</div>
<div class="choice" onclick="check('d2','vayas','deseo','vayas')">ir√°s</div>
</div>
<div id="d2-f" class="feedback"></div>
</div>

<button class="hint-btn" onclick="hint('deseo')">üí° Pista</button>
</section>

<section id="duda" class="room">
<h2>Sala de la Duda</h2>
<p>Subjuntivo con duda, negaci√≥n o incertidumbre.</p>

<div class="question">
<label>No creo que ellos _____ (tener) la respuesta.</label>
<input id="u1">
<button class="btn" onclick="check('u1','tengan','duda')">Comprobar</button>
<div id="u1-f" class="feedback"></div>
</div>

<button class="hint-btn" onclick="hint('duda')">üí° Pista</button>
</section>

<section id="emocion" class="room">
<h2>Sala de la Emoci√≥n</h2>

<div class="question">
<label>Me alegra que t√∫ _____ el examen.</label>
<div class="choices">
<div class="choice" onclick="check('e1','apruebes','emocion','apruebes')">apruebas</div>
<div class="choice" onclick="check('e1','apruebes','emocion','apruebes')">apruebes</div>
<div class="choice" onclick="check('e1','apruebes','emocion','apruebes')">aprobar√°s</div>
</div>
<div id="e1-f" class="feedback"></div>
</div>

<button class="hint-btn" onclick="hint('emocion')">üí° Pista</button>
</section>

<section id="finalidad" class="room">
<h2>Sala de la Finalidad</h2>

<div class="question">
<label>Traje el mapa para que t√∫ _____ el camino.</label>
<input id="f1">
<button class="btn" onclick="check('f1','sepas','finalidad')">Comprobar</button>
<div id="f1-f" class="feedback"></div>
</div>

<button class="hint-btn" onclick="hint('finalidad')">üí° Pista</button>
</section>

<section id="final" class="room">
<h2>‚ú® El √∫ltimo deseo</h2>

<div class="question">
<label>
El Guardi√°n desea que los aprendices _____ (comprender) el valor del idioma.
</label>
<input id="sf1">
<button class="btn" onclick="check('sf1','comprendan','final')">Comprobar</button>
<div id="sf1-f" class="feedback"></div>
</div>

<button class="btn" onclick="finish()">Intentar escapar</button>
<div id="final-f" class="feedback"></div>
</section>

</main>

<footer>
<button class="btn" style="background:#444;color:#fff" onclick="resetGame()">Reiniciar</button>
</footer>

<details open>
<summary>üìö Sugerencias para el profesor</summary>
<ul>
<li>Ideal como cierre de unidad del subjuntivo.</li>
<li>Modalidad individual o por equipos.</li>
<li>Comentar los errores tras cada sala.</li>
</ul>
</details>

</div>

<script>
let score=0;
let progress=0;
const done={};

const hints={
  deseo:"Despu√©s de verbos como esperar o recomendar, usa subjuntivo.",
  duda:"Con 'no creo que', normalmente usamos subjuntivo.",
  emocion:"Las emociones valoran otra acci√≥n ‚Üí subjuntivo.",
  finalidad:"'Para que' expresa finalidad y requiere subjuntivo."
};

function update(){
  document.getElementById("score").textContent=score;
  document.getElementById("progress").textContent=progress+"/5";
}

function check(id,correct,room,choice){
  if(done[id]) return;
  const val = choice || document.getElementById(id).value.trim().toLowerCase();
  const fb = document.getElementById(id+"-f");
  if(val===correct){
    score+=10;
    progress++;
    fb.textContent="‚úÖ Correcto. El guardi√°n asiente en silencio.";
    fb.className="feedback correct";
    done[id]=true;
    update();
  }else{
    score-=2;
    fb.textContent="‚ùå Incorrecto. Piensa en el uso del subjuntivo.";
    fb.className="feedback incorrect";
    update();
  }
}

function hint(room){
  score-=3;
  alert("üí° "+hints[room]);
  update();
}

document.querySelectorAll(".room-btn").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".room-btn").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    document.querySelectorAll(".room").forEach(r=>r.classList.remove("active"));
    document.getElementById(b.dataset.room).classList.add("active");
  };
});

function finish(){
  const fb=document.getElementById("final-f");
  if(progress<5){
    fb.textContent="A√∫n no has completado todas las salas.";
    fb.className="feedback incorrect";
    return;
  }
  if(score>=70){
    fb.textContent="üèÜ Has cumplido el √∫ltimo deseo del guardi√°n. El conocimiento es tuyo.";
    fb.className="feedback correct";
  }else{
    fb.textContent="Has llegado al final, pero necesitas al menos 70 puntos.";
    fb.className="feedback incorrect";
  }
}

function resetGame(){
  if(confirm("¬øReiniciar el juego?")){
    score=0;progress=0;
    for(let k in done) delete done[k];
    document.querySelectorAll(".feedback").forEach(f=>f.textContent="");
    document.querySelectorAll("input").forEach(i=>i.value="");
    update();
  }
}

update();
</script>

</body>
</html>

